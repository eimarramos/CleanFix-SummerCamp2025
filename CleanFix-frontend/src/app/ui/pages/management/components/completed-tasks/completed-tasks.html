<div class="flex h-full flex-col">
  <div class="mx-7 my-5">
    <app-search-bar />
  </div>

  <div class="mx-7 mb-5 flex min-h-0 flex-grow flex-col">
    <div class="min-h-0 flex-grow">
      <app-table
        [items]="completedTasks()"
        [tableColumns]="columns"
        (rowClick)="handleRowClick($event)"
      />
    </div>
    <div>
      <app-pagination
        [props]="{
          pageNumber: pageNumber(),
          pageSize: pageSize(),
          totalPages: totalPages(),
          totalCount: totalCount(),
          hasPreviousPage: hasPreviousPage(),
          hasNextPage: hasNextPage(),
        }"
        (pageNumberChange)="setPageNumber($event)"
        (pageSizeChange)="setPageSize($event)"
      />
    </div>
  </div>

  @if (showDialog() && completedTaskId) {
    <app-completed-task-dialog
      [completedTaskId]="completedTaskId"
      (closeDialog)="handleCloseDialog()"
    />
  }
</div>
